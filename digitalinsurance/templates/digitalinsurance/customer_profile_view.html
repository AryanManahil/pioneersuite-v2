{% extends "digitalbase.html" %}

{% block content %}
<div class="max-w-2xl mx-auto mt-12 p-8 bg-white rounded-2xl shadow-md text-sm">

  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-blue-700">Customer Profile</h2>

    {% if is_admin_view %}
      <a href="{% url 'digitalinsurance:admin_customer_list' %}"
         class="text-blue-600 underline text-sm hover:text-blue-800">
        ‚Üê Back to Customer List
      </a>
    {% else %}
      <a href="{% url 'digitalinsurance:customer_profile_edit' %}"
         class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition text-sm">
        ‚úèÔ∏è Edit
      </a>
    {% endif %}
  </div>

  <div class="space-y-5">
    <p>
      <span class="font-medium text-gray-700">Name:</span>
      {% if profile.user.first_name or profile.user.last_name %}
        {{ profile.user.first_name }} {{ profile.user.last_name }}
      {% else %}
        {{ profile.user.email }}
      {% endif %}
    </p>

    <p><span class="font-medium text-gray-700">Email:</span> {{ profile.user.email }}</p>
    <p><span class="font-medium text-gray-700">Phone:</span> {{ profile.phone }}</p>
    <p><span class="font-medium text-gray-700">NID/Passport:</span> {{ profile.national_id }}</p>
    <p><span class="font-medium text-gray-700">Date of Birth:</span> {{ profile.date_of_birth }}</p>
    <p><span class="font-medium text-gray-700">Address:</span> {{ profile.address }}</p>

    <p>
      <span class="font-medium text-gray-700">Status:</span>
      <span class="inline-block px-3 py-1 text-xs font-semibold rounded-full
        {% if profile.status == 'Approved' %} bg-green-100 text-green-700
        {% elif profile.status == 'Rejected' %} bg-red-100 text-red-700
        {% else %} bg-yellow-100 text-yellow-700
        {% endif %}">
        {{ profile.status }}
      </span>
    </p>

    <div>
      <p class="font-medium text-gray-700 mb-2">Photo:</p>
      {% if profile.photo %}
        <img src="{{ profile.photo.url }}" alt="Profile Photo" class="w-28 h-28 rounded object-cover border">
      {% else %}
        <p class="text-gray-500">No photo uploaded.</p>
      {% endif %}
    </div>

    <div>
      <p class="font-medium text-gray-700 mb-2">Document:</p>
      {% if profile.document %}
        <a href="{{ profile.document.url }}" target="_blank" class="text-blue-600 underline hover:text-blue-800">
          üìÑ View Uploaded Document
        </a>
      {% else %}
        <p class="text-gray-500">No document uploaded.</p>
      {% endif %}
    </div>
  </div>

  {% if is_admin_view %}
    <form method="post" class="mt-8 border-t pt-6">
      {% csrf_token %}
      <div class="flex gap-4">
        <button name="action" value="approve" type="submit"
                class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
          ‚úÖ Approve
        </button>
        <button name="action" value="reject" type="submit"
                class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">
          ‚ùå Reject
        </button>
      </div>
    </form>
  {% endif %}

</div>
{% endblock %}
